/*! wc_name_your_price 2.7.1 */

jQuery(document).ready(function(o){function i(o,i){return void 0===i&&(i=""),accounting.formatMoney(o,{symbol:i,decimal:woocommerce_nyp_params.currency_format_decimal_sep,thousand:woocommerce_nyp_params.currency_format_thousand_sep,precision:woocommerce_nyp_params.currency_format_num_decimals,format:woocommerce_nyp_params.currency_format}).trim()}o.fn.woocommerce_nyp_update=function(){if(o(this).on("woocommerce-nyp-update",function(){var e=o(this),n=e.find(".nyp"),t=e.find(".nyp-input"),r=e.find(":submit"),c=e.find(".ajax_add_to_cart"),a=t.val(),m=e.find(".woocommerce-nyp-message");m.length||o('<div class="woocommerce-nyp-message woocommerce-error"></div>').hide().prependTo(n);var p=woocommerce_nyp_params.minimum_error,d=!1,_="",s=function(o){return Math.abs(parseFloat(accounting.unformat(o,woocommerce_nyp_params.currency_format_decimal_sep)))}(a),u=parseFloat(n.data("min-price")),l=parseFloat(n.data("annual-minimum")),f=e.find(".nyp-period"),y=f.val();l>0?(form_annulualized_price=s*woocommerce_nyp_params.annual_price_factors[y],form_annulualized_price<l&&(_=i(d=l/woocommerce_nyp_params.annual_price_factors[y],woocommerce_nyp_params.currency_format_symbol)+" / "+f.find('option[value="'+y+'"]').text())):s<u&&(_=i(d=u,woocommerce_nyp_params.currency_format_symbol)),""!=o.trim(a)&&t.val(i(s)),c.length&&c.data(t.attr("name"),i(s)),d?(r.prop("disabled",!0),p=p.replace("%%MINIMUM%%",_),m.html(p).slideDown(function(){t.focus()})):(r.prop("disabled",!1),m.slideUp(),o(this).find("#product-addons-total").data("price",s),e.trigger("woocommerce-product-addons-update"),n.data("price",s),e.trigger("woocommerce-nyp-updated-item"),o("body").trigger("woocommerce-nyp-updated"))}),o(this).on("change",".nyp-input, .nyp-period",function(){o(this).closest(".cart, .nyp-product").trigger("woocommerce-nyp-update")}),o(this).find(".nyp-input").trigger("change"),o(this).hasClass("variations_form")){var e=o(this),n=o(this).find("button.single_add_to_cart_button"),t=o(this).find(".nyp"),r=t.find(".nyp-input"),c=t.find(".minimum-price"),a=t.find(".subscription-details"),m=n.html();t.hide(),c.hide(),e.on("found_variation",function(e,p){void 0!=typeof p.is_nyp&&1==p.is_nyp?(n.html(p.add_to_cart_text),posted_price=p.posted_price,initial_price=p.initial_price,minimum_price=p.minimum_price,""!=o.trim(posted_price)?r.val(i(posted_price)):""!=o.trim(initial_price)?r.val(i(initial_price)):r.val(""),a.length&&p.subscription_terms&&a.html(p.subscription_terms),p.minimum_price_html?c.html(p.minimum_price_html).show():c.hide(),t.data("min-price",minimum_price).slideDown(),o(this).find("#product-addons-total").data("price",minimum_price),o(this).trigger("woocommerce-product-addons-update")):(n.html(m),t.slideUp())}).on("reset_image",function(o){n.html(m),t.slideUp()}).on("click",".reset_variations",function(o){n.html(m),t.slideUp()}),o(this).find(".variations select").trigger("change")}},o("body").on("quick-view-displayed",function(){o("body").find(".cart:not(.cart_group)").each(function(){o(this).woocommerce_nyp_update()})}),o("body .component").on("wc-composite-component-loaded",function(){o(this).find(".cart:not(.cart_group)").each(function(){o(this).woocommerce_nyp_update()})}),o("body").find(".cart:not(.cart_group, .grouped_form)").each(function(){o(this).woocommerce_nyp_update()}),o("body .grouped_form").find(".nyp-product").each(function(){o(this).woocommerce_nyp_update()})});