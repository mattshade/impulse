!function(a){"use strict";var b={form:a("form.checkout, form#order_review, form#add_payment_method"),data:a("#wsspg-data"),init:function(){a(b.form).on("click","#place_order",this.on_click).on("submit checkout_place_order_stripe").append("<input type='hidden' name='wsspg-data' value='' />")},on_click:function(c){if("wsspg"!==a("input[name=payment_method]:checked").val())return!0;var e=a(".validate-required"),f=!0;if(e.each(function(){"none"!=a(this).parent().css("display")&&""===a(this).find("input.input-text, select").val()&&(f=!1)}),!f)return!0;var g=a('input[name="wc-wsspg-payment-token"]:checked').val();if("new"===g){c.preventDefault();return StripeCheckout.configure({key:b.data.data("key"),name:b.data.data("name"),email:a("#billing_email").val(),amount:b.data.data("amount"),currency:b.data.data("currency"),panelLabel:b.data.data("label"),image:b.data.data("image"),locale:b.data.data("locale"),bitcoin:b.data.data("bitcoin"),allowRememberMe:b.data.data("remember-me"),alipay:b.data.data("alipay"),token:function(c,d){var e={method:"checkout",token:c,save:a("#wc-wsspg-new-payment-method").is(":checked"),error:null};a("input[name=wsspg-data]").val(JSON.stringify(e,null)),console.log(e),b.form.submit()}}).open(),!1}var h={method:"saved",token:g,save:null,error:null};a("input[name=wsspg-data]").val(JSON.stringify(h,null)),b.form.submit()}};b.init()}(jQuery);
